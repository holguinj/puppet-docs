---
layout: default
title: "SSL: Certificate Locations on Disk"
---


### The `ssldir` and Certificate Locations

Puppet stores all of its certificates, private keys, CSRs, and other crypto documents on disk in PEM format in the "ssldir," whose location can be configured with the [`ssldir` setting][ssldir]. This directory is used with a similar layout by puppet agent, puppet master, and the Puppet CA system, although not every application will use the same parts of the ssldir.

The permissions mode of the ssldir should be 0771, and it and every file it contains should be owned by the user Puppet runs as (i.e., root or Administrator on puppet agent nodes and defaulting to `puppet` on a puppet master server).

The layout of the ssldir is as follows:

* `ca` _(directory)_ --- Contains certificate authority (CA) infrastructure. This directory must only exist on the CA puppet master server, and only if you are using Puppet's built-in CA. Mode: 0770. Setting: [`cadir`][cadir].
    * `ca_crl.pem` --- The master copy of the certificate revocation list (CRL) managed by the CA. Mode: 0664. Setting: [`cacrl`][cacrl].
    * `ca_crt.pem` --- The CA's self-signed certificate. Mode: 0660. Setting: [`cacert`][cacert].
    * `ca_key.pem` --- The CA's private key. Tied for most security-critical file in the entire Puppet certificate infrastructure. Mode: 0660. Setting: [`cakey`][cakey].
    * `ca_pub.pem` --- The CA's public key. Mode: Not specified. Setting: [`capub`][capub].
    * `inventory.txt` --- A list of all certificates the CA has signed, along with their serial numbers and validity periods. Mode: 0644. Setting: [`cert_inventory`][cert_inventory].
    * `private` _(directory)_ --- Contains only one file. Mode: 0770. Setting: [`caprivatedir`][caprivatedir].
        * `ca.pass` --- The password to the CA's private key. Tied for most security-critical file in the entire Puppet certificate infrastructure. Mode: 0660. Setting: [`capass`][capass].
    * `requests` _(directory)_ --- Contains CSRs that were received but have not yet been signed. The CA deletes CSRs from this directory after signing them. Mode: Not specified. Setting: [`csrdir`][csrdir].
    * `serial` --- A file containing the serial number for the next certificate the CA will sign. Mode: 0644. Setting: [`serial`][serial].
    * `signed` _(directory)_ --- Contains certificates the CA has signed. Mode: 0770. Setting: [`signeddir`][signeddir].
* `certificate_requests` _(directory)_ --- Contains any CSRs generated by this node in preparation for submission to the CA. CSRs persist in this directory even after they have been submitted and signed. Mode: Not specified. Setting: [`requestdir`][requestdir].
    * `<certname>.pem` --- This node's CSR. Mode: 0644. Setting: [`hostcsr`][hostcsr].
* `certs` _(directory)_ --- Contains any signed certificates present on this node. This includes the node's own certificate, as well as a copy of the CA certificate (for use when validating certificates presented by other nodes). Mode: Not specified. Setting: [`certdir`][certdir].
    * `<certname>.pem` --- This node's certificate. Mode: 0644. Setting: [`hostcert`][hostcert].
    * `ca.pem` --- A local copy of the CA certificate. Mode: 0644. Setting: [`localcacert`][localcacert].
* `crl.pem` --- A copy of the certificate revocation list (CRL) retrieved from the CA, for use by puppet agent or puppet master. Mode: 0644. Setting: [`hostcrl`][hostcrl].
* `private` _(directory)_ --- Usually does not contain any files. Mode: 0750. Setting: [`privatedir`][privatedir].
    * `password` --- The password to a node's private key. Usually not present. The conditions in which this file would exist are not defined. Mode: 0640. Setting: [`passfile`][passfile].
* `private_keys` _(directory)_ --- Contains any private keys present on this node. This should generally only include the node's own private key, although on the CA it may also contain any private keys created by the `puppet cert generate` command. It will never contain the private key for the CA certificate. Mode: 0750. Setting: [`privatekeydir`][privatekeydir].
    * `<certname>.pem` --- This node's private key. Mode: 0600. Setting: [`hostprivkey`][hostprivkey].
* `public_keys` _(directory)_ --- Contains any public keys generated by this node in preparation for generating a CSR. Mode: Not specified. Setting: [`publickeydir`][publickeydir].
    * `<certname>.pem` --- This node's public key. Mode: 0644. Setting: [`hostpubkey`][hostpubkey].

